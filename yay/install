#!/bin/bash
script_dir="$(cd "$(dirname "$0")" && pwd)"

app_name="yay"
app_name_fmt="\033[1;32m${app_name}\033[0m"

echo -e "[${app_name_fmt}] Checking if yay is installed..."
if ! command -v yay &>/dev/null; then
    echo -e "[${app_name_fmt}] Installing yay from AUR..."
    cd "$HOME"

    # Si ya existe la carpeta yay, eliminarla
    if [ -d "yay" ]; then
        echo -e "[${app_name_fmt}] Found existing yay folder. Removing..."
        rm -rf yay
    fi

    echo -e "[${app_name_fmt}] Cloning yay repository..."
    git clone https://aur.archlinux.org/yay.git

    echo -e "[${app_name_fmt}] Building and installing yay..."
    cd yay
    makepkg -si --noconfirm

    echo -e "[${app_name_fmt}] Returning to original directory..."
    cd "$script_dir"
else
    echo -e "[${app_name_fmt}] Yay is already installed."
fi

echo -e "[${app_name_fmt}] Yay setup completed."
